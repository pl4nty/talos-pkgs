From 1628fde9aca5932a18963abe836e640bb6be5a89 Mon Sep 17 00:00:00 2001
From: Tom Plant <tom@tplant.com.au>
Date: Sun, 3 Dec 2023 09:56:24 +0000
Subject: [PATCH] rock-pi-4: enable boot from SPI flash

this patch was missing from https://github.com/armbian/build/blob/09e416e31cc01ece4533a65f02a470a4c21b90ea/patch/u-boot/u-boot-rockchip64/board-rock-pi-4-enable-spi-flash.patch
and prevented booting from SPI

Signed-off-by: Tom Plant <tom@tplant.com.au>
---
 configs/rock-pi-4-rk3399_defconfig  | 1 +
 configs/rock-pi-4c-rk3399_defconfig | 1 +
 2 files changed, 2 insertions(+)

diff --git a/configs/rock-pi-4-rk3399_defconfig b/configs/rock-pi-4-rk3399_defconfig
index 8866e89d38..5e8fa979f5 100644
--- a/configs/rock-pi-4-rk3399_defconfig
+++ b/configs/rock-pi-4-rk3399_defconfig
@@ -17,6 +17,7 @@ CONFIG_TARGET_EVB_RK3399=y
 CONFIG_SPL_STACK=0x400000
 CONFIG_DEBUG_UART_BASE=0xFF1A0000
 CONFIG_DEBUG_UART_CLOCK=24000000
+CONFIG_SPL_SPI=y
 CONFIG_SPL_SPI_FLASH_SUPPORT=y
 CONFIG_SPL_SPI_SUPPORT=y
 CONFIG_SYS_LOAD_ADDR=0x800800
diff --git a/configs/rock-pi-4c-rk3399_defconfig b/configs/rock-pi-4c-rk3399_defconfig
index 8f08f33fdb..aca2e64f04 100644
--- a/configs/rock-pi-4c-rk3399_defconfig
+++ b/configs/rock-pi-4c-rk3399_defconfig
@@ -17,6 +17,7 @@ CONFIG_TARGET_EVB_RK3399=y
 CONFIG_SPL_STACK=0x400000
 CONFIG_DEBUG_UART_BASE=0xFF1A0000
 CONFIG_DEBUG_UART_CLOCK=24000000
+CONFIG_SPL_SPI=y
 CONFIG_SPL_SPI_FLASH_SUPPORT=y
 CONFIG_SPL_SPI_SUPPORT=y
 CONFIG_SYS_LOAD_ADDR=0x800800
-- 
2.39.2
